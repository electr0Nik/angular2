// default spring-boot build-script
plugins {
	id "com.moowork.node" version "0.13"
}

apply plugin: 'base'

// define repo to obtain dependencies from
repositories {
	mavenCentral()
	// jcenter()
}

node {
	version = '6.5.0'
	npmVersion = '3.10.3'

    // If true, it will download node using above parameters.
    // If false, it will try to use globally installed node.
    download = true

    // Set the work directory for unpacking node
    workDir = file("${project.buildDir}/nodejs")

    // Set the work directory where node_modules should be located
    nodeModulesDir = file("${project.projectDir}")
}

// clean node/node_modules/dist
task npmClean(type: Delete) {
	final def nodeJSMain = "${project.projectDir}"
	// delete "${nodeJSMain}/node"
	delete "${nodeJSMain}/node_modules"
	delete "${nodeJSMain}/dist"
	delete "${nodeJSMain}/coverage"
}

clean.dependsOn(npmClean)